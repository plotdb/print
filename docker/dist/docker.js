// Generated by LiveScript 1.6.0
(function(){
  var express, print, printer, app, port;
  express = require('express');
  print = require("./index");
  printer = new print();
  process.on('SIGINT', function(){
    return process.exit();
  });
  app = express();
  app.get('/ping', function(req, res){
    return res.send('pong');
  });
  app.get('/pdf', function(req, res){
    var code, url;
    code = req.params.code;
    url = decodeURIComponent(req.query.code);
    console.log(url);
    return printer.init().then(function(){
      console.log("inited");
      return printer.print({
        url: url
      }).then(function(it){
        console.log("send");
        return res.send(it);
      });
    });
  });
  port = process.env.PORT || 8080;
  app.listen(port);
}).call(this);
